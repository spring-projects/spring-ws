general:
  branches:
    ignore:
      - gh-pages # list of branches to ignore

machine:
  java:
    version: oraclejdk8
  environment:
    _JAVA_OPTIONS: "-Xms1024m -Xmx2048m"

test:
  override:
    - ./gradlew clean build
    - ./gradlew -Pprofile=spring4-next clean build
    - ./gradlew -Pprofile=spring5 clean build

  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - find target -name "surefire-reports/*" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;
    - find target -name "spring-ws*.jar" -exec cp {} $CIRCLE_ARTIFACTS \;